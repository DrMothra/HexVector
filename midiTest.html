<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Midi Test</title>

    <!-- shim -->
    <script src="inc/shim/Base64.js" type="text/javascript"></script>
    <script src="inc/shim/Base64binary.js" type="text/javascript"></script>
    <script src="inc/shim/WebAudioAPI.js" type="text/javascript"></script>
    <script src="inc/shim/WebMIDIAPI.js" type="text/javascript"></script>
    <!-- jasmid package -->
    <script src="js/jasmid/stream.js"></script>
    <script src="js/jasmid/midifile.js"></script>
    <script src="js/jasmid/replayer.js"></script>
    <!-- midi.js package -->
    <script src="js/midi/audioDetect.js" type="text/javascript"></script>
    <script src="js/midi/gm.js" type="text/javascript"></script>
    <script src="js/midi/loader.js" type="text/javascript"></script>
    <script src="js/midi/plugin.audiotag.js" type="text/javascript"></script>
    <script src="js/midi/plugin.webaudio.js" type="text/javascript"></script>
    <script src="js/midi/plugin.webmidi.js" type="text/javascript"></script>
    <script src="js/midi/player.js" type="text/javascript"></script>
    <script src="js/midi/synesthesia.js" type="text/javascript"></script>
    <!-- utils -->
    <script src="js/util/dom_request_xhr.js" type="text/javascript"></script>
    <script src="js/util/dom_request_script.js" type="text/javascript"></script>
    <!-- includes -->
    <script src="./inc/timer.js" type="text/javascript"></script>
    <script src="./inc/colorspace.js" type="text/javascript"></script>
    <script src="./inc/event.js" type="text/javascript"></script>


</head>
<body>

<button id="playMidi">Play Midi</button>

<button id="stopMidi">Stop Midi</button>

<script type="text/javascript">
    eventjs.add(window, "load", function(event) {
        var player;

        MIDI.loader = new sketch.ui.Timer;
        MIDI.loadPlugin({
            soundfontUrl: "./soundfont/",
            onsuccess: function() {
                /// this is the language we are running in
                /// this sets up the MIDI.Player and gets things going...
                player = MIDI.Player;
                player.timeWarp = 1; // speed the song is played back
                console.log("About to load");
                player.loadFile("./assets/layer1.mid", player.start);
            }
        });
    });
</script>
</body>
</html>